<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin | Languages</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- AdminLTE CSS + Font Awesome (CDN) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css">
</head>
<body class="hold-transition sidebar-mini layout-fixed">
<div class="wrapper">

  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="adminlte.html" class="nav-link">Home</a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="../index.html" class="nav-link">Back to Blog</a>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
          <i class="fas fa-expand-arrows-alt"></i>
        </a>
      </li>
    </ul>
  </nav>

  <!-- Main Sidebar -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <a href="adminlte.html" class="brand-link">
      <i class="fas fa-blog"></i>
      <span class="brand-text font-weight-light">Blog Admin</span>
    </a>
    <div class="sidebar">
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu">
          <li class="nav-item">
            <a href="adminlte.html" class="nav-link">
              <i class="nav-icon fas fa-tachometer-alt"></i>
              <p>Dashboard</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="admin-posts.html" class="nav-link">
              <i class="nav-icon fas fa-file-alt"></i>
              <p>Posts</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="admin-categories.html" class="nav-link">
              <i class="nav-icon fas fa-tags"></i>
              <p>Categories</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="admin-users.html" class="nav-link">
              <i class="nav-icon fas fa-users"></i>
              <p>Users</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="admin-languages.html" class="nav-link active">
              <i class="nav-icon fas fa-language"></i>
              <p>Languages</p>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </aside>

  <!-- Content Wrapper -->
  <div class="content-wrapper">
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6"><h1>Manage Languages</h1></div>
        </div>
      </div>
    </section>

    <section class="content">
      <div class="container-fluid">

        <!-- Add Language Form -->
        <div class="card card-primary">
          <div class="card-header"><h3 class="card-title">Add New Language</h3></div>
          <form>
            <div class="card-body">
              <div class="form-group">
                <label for="langName">Language name</label>
                <input type="text" class="form-control" id="langName" placeholder="e.g. English, Vietnamese">
              </div>
              <div class="form-group">
                <label for="langCode">Locale Code</label>
                <input type="text" class="form-control" id="langCode" placeholder="e.g. en, vi">
              </div>
              <div class="form-group">
                <label>Status</label>
                <select class="form-control">
                  <option value="active" selected>Active</option>
                  <option value="inactive">Inactive</option>
                </select>
              </div>
            </div>
            <div class="card-footer">
              <button type="submit" class="btn btn-primary">Add Language</button>
            </div>
          </form>
        </div>

        <!-- Language Table -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Language List</h3>
          </div>
          <div class="card-body">
            <table class="table table-bordered table-hover" id="language-table">
              <thead>
                <tr>
                  <th style="width: 5%;">#</th>
                  <th style="width: 20%;">Name</th>
                  <th style="width: 15%;">Locale Code</th>
                  <th style="width: 15%;">Status</th>
                  <th style="width: 15%;">Default</th>
                  <th style="width: 20%;">Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr data-active="true" data-default="true">
                  <td>1</td>
                  <td>English</td>
                  <td>en</td>
                  <td class="lang-status"><span class="badge badge-success">Active</span></td>
                  <td>
                    <span class="badge badge-primary"><i class="fas fa-star"></i> Default</span>
                  </td>
                  <td>
                    <button class="btn btn-xs btn-info"><i class="fas fa-edit"></i> Edit</button>
                    <button class="btn btn-xs btn-warning btn-toggle-status"><i class="fas fa-ban"></i> Disable</button>
                  </td>
                </tr>
                <tr data-active="true" data-default="false">
                  <td>2</td>
                  <td>Vietnamese</td>
                  <td>vi</td>
                  <td class="lang-status"><span class="badge badge-success">Active</span></td>
                  <td></td>
                  <td>
                    <button class="btn btn-xs btn-info"><i class="fas fa-edit"></i> Edit</button>
                    <button class="btn btn-xs btn-warning btn-toggle-status"><i class="fas fa-ban"></i> Disable</button>
                  </td>
                </tr>
                <tr data-active="false" data-default="false">
                  <td>3</td>
                  <td>French</td>
                  <td>fr</td>
                  <td class="lang-status"><span class="badge badge-secondary">Inactive</span></td>
                  <td></td>
                  <td>
                    <button class="btn btn-xs btn-info"><i class="fas fa-edit"></i> Edit</button>
                    <button class="btn btn-xs btn-success btn-toggle-status"><i class="fas fa-check"></i> Enable</button>
                  </td>
                </tr>
                <!-- Thêm dòng mới nếu cần -->
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </section>
  </div>

  <footer class="main-footer">
    <strong>Copyright &copy; 2024 BlogBlogBlog Admin.</strong>
    All rights reserved.
  </footer>
</div>

<!-- Modal Xác Nhận -->
<div class="modal fade" id="confirmDisableModal" tabindex="-1" role="dialog" aria-labelledby="confirmDisableModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirm Disable</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="disable-alert" class="alert alert-danger d-none"></div>
        <span id="disable-message">Are you sure you want to disable this language?</span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-warning" id="btnConfirmDisable">Disable</button>
      </div>
    </div>
  </div>
</div>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>
<script>
$(document).ready(function() {
  let $pendingRow = null;

  // Bấm Disable
  $('#language-table').on('click', '.btn-toggle-status.btn-warning', function() {
    $pendingRow = $(this).closest('tr');
    var isDefault = $pendingRow.attr('data-default') === 'true';
    $('#disable-alert').addClass('d-none').text('');
    if(isDefault) {
      $('#disable-alert').removeClass('d-none').text('Cannot disable the Default language!');
      $('#btnConfirmDisable').prop('disabled', true);
      $('#disable-message').hide();
    } else {
      $('#btnConfirmDisable').prop('disabled', false);
      $('#disable-message').show();
    }
    $('#confirmDisableModal').modal('show');
  });

  // Bấm Enable (không cần confirm)
  $('#language-table').on('click', '.btn-toggle-status.btn-success', function() {
    var $row = $(this).closest('tr');
    $row.attr('data-active', 'true');
    $row.find('.lang-status').html('<span class="badge badge-success">Active</span>');
    $(this)
      .removeClass('btn-success').addClass('btn-warning')
      .html('<i class="fas fa-ban"></i> Disable');
  });

  // Xác nhận Disable
  $('#btnConfirmDisable').on('click', function() {
    if ($pendingRow) {
      $pendingRow.attr('data-active', 'false');
      $pendingRow.find('.lang-status').html('<span class="badge badge-secondary">Inactive</span>');
      $pendingRow.find('.btn-toggle-status')
        .removeClass('btn-warning').addClass('btn-success')
        .html('<i class="fas fa-check"></i> Enable');
      $('#confirmDisableModal').modal('hide');
    }
  });

  // Khi đóng modal thì clear trạng thái
  $('#confirmDisableModal').on('hidden.bs.modal', function () {
    $('#disable-alert').addClass('d-none').text('');
    $pendingRow = null;
  });
});
</script>
</body>
</html>
